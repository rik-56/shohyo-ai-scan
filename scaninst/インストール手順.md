# 証憑 AI Scan - はじめに使うための準備

このガイドでは、「証憑 AI Scan」をお使いのパソコンで動かすための準備を、順を追って説明します。

---

## 📋 はじめに確認すること

### 必要なもの

| 必要なもの | 説明 |
|-----------|------|
| Windows 10 または 11 | お使いのパソコンのOS |
| インターネット接続 | ChatGPT/Claude Webを使用するために必要です |
| Google Chrome または Microsoft Edge | 最新版を推奨します |

### 準備にかかる時間の目安

約10分（初めての方でも20分あれば完了できます）

---

## 🔧 Step 1: Node.js をパソコンに入れる

**Node.js（ノード・ジェイエス）とは？**
このアプリを動かすために必要なソフトです。一度入れれば、あとは意識する必要はありません。

### 手順

1. **下のリンクをクリックして、ダウンロードページを開きます**

   👉 [Node.js ダウンロードページ](https://nodejs.org/ja/)

2. **緑色の「LTS」と書かれたボタンをクリックします**

   ※ 「LTS」は安定版という意味です。必ずこちらを選んでください。

3. **ダウンロードが完了したら、ダウンロードしたファイルをダブルクリックします**

   ファイル名は「node-v○○.○○.○-x64.msi」のような形式です。

4. **インストール画面が表示されます。以下の手順で進めてください**

   | 画面 | 操作 |
   |------|------|
   | Welcome画面 | 「Next」をクリック |
   | 使用許諾 | チェックを入れて「Next」をクリック |
   | インストール先 | そのまま「Next」をクリック |
   | カスタムセットアップ | そのまま「Next」をクリック |
   | ツールのインストール | そのまま「Next」をクリック |
   | インストール準備完了 | 「Install」をクリック |
   | 完了画面 | 「Finish」をクリック |

5. **パソコンを再起動します**

   ※ 再起動しないと正しく動かない場合があります

### ✅ 成功の確認方法

1. キーボードの **Windowsキー** を押しながら **R** を押します
2. 「ファイル名を指定して実行」という小さな画面が出ます
3. 「cmd」と入力して「OK」をクリックします
4. 黒い画面（コマンドプロンプト）が表示されます
5. 以下の文字を入力して **Enter** を押します：
   ```
   node --version
   ```
6. 「v20.○○.○」のような数字が表示されれば成功です

**表示例：**
```
v20.12.0
```

---

## 📦 Step 2: アプリの準備をする

アプリを動かすために必要なファイルを自動でダウンロードします。

### 手順

1. **scaninstフォルダを開きます**

   場所：`C:\codefolder\scan\scaninst`

2. **「install.bat」をダブルクリックします**

   ※ 「.bat」が表示されていない場合は「install」という名前のファイルです

   アイコンは歯車のような形をしています。

3. **黒い画面が表示されます**

   自動でファイルのダウンロードが始まります。
   たくさんの文字が流れますが、そのままお待ちください。

   ※ 初回は2〜5分程度かかることがあります

4. **「インストール完了」というメッセージが表示されたら成功です**

### ✅ 成功するとこうなります

黒い画面に以下のようなメッセージが表示されます：
```
added ○○○ packages in ○○s

=================================
インストールが完了しました
=================================
```

### ⚠️ うまくいかない場合

- 「node が見つかりません」と表示される場合
  → Step 1 をもう一度確認してください。パソコンの再起動を忘れていませんか？

- 黒い画面がすぐに閉じてしまう場合
  → 後述の「困ったときは」をご覧ください

---

## ▶️ Step 3: アプリを起動する

いよいよアプリを起動します。

### 手順

1. **scanフォルダを開きます**

   場所：`C:\codefolder\scan`

2. **「start.bat」をダブルクリックします**

   ※ このファイルがない場合は、以下の方法で起動してください：

   **start.batがない場合の起動方法：**
   1. scanフォルダ内の空いている場所で **Shift** を押しながら右クリック
   2. 「PowerShell ウィンドウをここで開く」または「ターミナルで開く」をクリック
   3. 青い画面または黒い画面が表示されます
   4. 以下の文字を入力して **Enter** を押します：
      ```
      npm run dev
      ```

3. **黒い画面に以下のようなメッセージが表示されるまで待ちます**

   ```
   VITE v6.x.x  ready

   ➜  Local:   http://localhost:3000/
   ```

4. **ブラウザが自動で開きます**

   自動で開かない場合は、Google ChromeまたはEdgeを開いて、アドレスバーに以下を入力してください：
   ```
   http://localhost:3000
   ```

### ✅ 成功するとこうなります

ブラウザに「証憑 AI Scan」の画面が表示されます。

### アプリを終了するには

黒い画面を閉じるか、黒い画面で **Ctrl** を押しながら **C** を押します。

---

## ❓ 困ったときは（トラブルシューティング）

### 「'node' は、内部コマンドまたは外部コマンドとして認識されていません」と表示される

**原因：** Node.js がパソコンに入っていないか、パソコンを再起動していません

**解決方法：**
1. パソコンを再起動してください
2. それでも解決しない場合は、Step 1 を最初からやり直してください

---

### 「ポート 3000 が使用中です」と表示される

**原因：** 他のソフトが同じ通信口を使っています

**解決方法：**
1. 黒い画面で以下を入力して Enter を押します：
   ```
   npm run dev -- --port 3001
   ```
2. ブラウザで `http://localhost:3001` を開きます

---

### 黒い画面がすぐに閉じてしまう

**原因：** エラーが発生して、画面が閉じてしまっています

**解決方法：**
1. 「ファイル名を指定して実行」で「cmd」と入力して黒い画面を開きます
2. 以下の文字を1行ずつ入力して Enter を押します：
   ```
   cd C:\codefolder\scan
   npm install
   ```
3. エラーメッセージが表示された場合は、その内容をメモして開発者にお問い合わせください

---

## 📖 使い方の流れ

設定が完了したら、以下の流れで使ってみましょう：

1. アプリを起動する
2. クライアント（取引先）を選択または新規作成
3. 帳簿の種類を選択（現金出納帳など）
4. **【新機能】勘定科目・補助科目を事前選択**（任意）
5. レシートや証憑の画像をアップロード
6. 「AI解析を実行する」をクリックし、ChatGPT/Claudeで解析
7. AIが読み取った内容を確認・編集
   - T番号（インボイス番号）も表示されます
8. **【新機能】税区分を選択**
9. CSVファイルをダウンロード

### 新機能について

#### 勘定科目の事前選択
設定エリアで「CSV出力時の勘定科目」を選択しておくと、CSV出力時にすべての取引に自動適用されます。空欄の場合は個別の設定が優先されます。

#### 税区分選択
仕訳プレビューの上部で税区分を選択できます。選択した税区分はCSV出力時に摘要欄に追記されます（例：「文房具購入【課税仕入 10%】」）。

デフォルトの税区分：
- 課税売上 10%
- 課税売上 (軽)8%
- 課税仕入 10%
- 課税仕入 (軽)8%
- 対象外仕入
- 非課税仕入

「追加」ボタンからカスタム税区分を追加することもできます。

#### T番号（インボイス番号）
AIが領収書からT番号（適格請求書発行事業者登録番号）を自動抽出します。T番号は画面上で確認・編集できますが、CSV出力には含まれません。

---

お疲れさまでした！設定がうまくいかない場合は、お気軽にご相談ください。
